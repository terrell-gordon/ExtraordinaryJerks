(function(b){b.fn.slides=function(a){a=b.extend({},b.fn.slides.option,a);return this.each(function(){b("."+a.container,b(this)).children().wrapAll('<div class="slides_control"/>');var D=b(this),P=b(".slides_control",D),A=P.children().size(),I=P.children().outerWidth(),M=P.children().outerHeight(),V=a.start-1,N=a.effect.indexOf(",")<0?a.effect:a.effect.replace(" ","").split(",")[0],G=a.effect.indexOf(",")<0?N:a.effect.replace(" ","").split(",")[1],K=0,L=0,W=0,J=0,E,R,Q,B,C,F,O,T;function U(d,e,c){if(!R&&E){R=true;switch(d){case"next":L=J;K=J+1;K=A===K?0:K;B=I*2;d=-I*2;J=K;break;case"prev":L=J;K=J-1;K=K===-1?A-1:K;B=0;d=0;J=K;break;case"pagination":K=parseInt(c,10);L=b("."+a.paginationClass+" li.current a",D).attr("href").match("[^#/]+$");if(K>L){B=I*2;d=-I*2}else{B=0;d=0}J=K;break}if(e==="fade"){a.animationStart();if(a.crossfade){P.children(":eq("+K+")",D).css({zIndex:10}).fadeIn(a.fadeSpeed,a.fadeEasing,function(){if(a.autoHeight){P.animate({height:P.children(":eq("+K+")",D).outerHeight()},a.autoHeightSpeed,function(){P.children(":eq("+L+")",D).css({display:"none",zIndex:0});P.children(":eq("+K+")",D).css({zIndex:0});a.animationComplete(K+1);R=false})}else{P.children(":eq("+L+")",D).css({display:"none",zIndex:0});P.children(":eq("+K+")",D).css({zIndex:0});a.animationComplete(K+1);R=false}})}else{a.animationStart();P.children(":eq("+L+")",D).fadeOut(a.fadeSpeed,a.fadeEasing,function(){if(a.autoHeight){P.animate({height:P.children(":eq("+K+")",D).outerHeight()},a.autoHeightSpeed,function(){P.children(":eq("+K+")",D).fadeIn(a.fadeSpeed,a.fadeEasing)})}else{P.children(":eq("+K+")",D).fadeIn(a.fadeSpeed,a.fadeEasing,function(){if(b.browser.msie){b(this).get(0).style.removeAttribute("filter")}})}a.animationComplete(K+1);R=false})}}else{P.children(":eq("+K+")").css({left:B,display:"block"});if(a.autoHeight){a.animationStart();P.animate({left:d,height:P.children(":eq("+K+")").outerHeight()},a.slideSpeed,a.slideEasing,function(){P.css({left:-I});P.children(":eq("+K+")").css({left:I,zIndex:5});P.children(":eq("+L+")").css({left:I,display:"none",zIndex:0});a.animationComplete(K+1);R=false})}else{a.animationStart();P.animate({left:d},a.slideSpeed,a.slideEasing,function(){P.css({left:-I});P.children(":eq("+K+")").css({left:I,zIndex:5});P.children(":eq("+L+")").css({left:I,display:"none",zIndex:0});a.animationComplete(K+1);R=false})}}if(a.pagination){b("."+a.paginationClass+" li.current",D).removeClass("current");b("."+a.paginationClass+" li:eq("+K+")",D).addClass("current")}}}function H(){clearInterval(D.data("interval"))}function S(){if(a.pause){clearTimeout(D.data("pause"));clearInterval(D.data("interval"));O=setTimeout(function(){clearTimeout(D.data("pause"));T=setInterval(function(){U("next",N)},a.play);D.data("interval",T)},a.pause);D.data("pause",O)}else{H()}}if(A<2){return}if(V<0){V=0}if(V>A){V=A-1}if(a.start){J=V}if(a.randomize){P.randomize()}b("."+a.container,D).css({overflow:"hidden",position:"relative"});P.children().css({position:"absolute",top:0,left:P.children().outerWidth(),zIndex:0,display:"none"});P.css({position:"relative",width:(I*3),height:M,left:-I});b("."+a.container,D).css({display:"block"});if(a.autoHeight){P.children().css({height:"auto"});P.animate({height:P.children(":eq("+V+")").outerHeight()},a.autoHeightSpeed)}P.children(":eq("+V+")").fadeIn(a.fadeSpeed,a.fadeEasing,function(){E=true});if(a.bigTarget){P.children().css({cursor:"pointer"});P.children().click(function(){U("next",N);return false})}if(a.hoverPause&&a.play){P.bind("mouseover",function(){H()});P.bind("mouseleave",function(){S()})}if(a.generateNextPrev){b("."+a.container,D).after('<a href="#" class="'+a.prev+'">Prev</a>');b("."+a.prev,D).after('<a href="#" class="'+a.next+'">Next</a>')}b("."+a.next,D).click(function(c){c.preventDefault();if(a.play){S()}U("next",N)});b("."+a.prev,D).click(function(c){c.preventDefault();if(a.play){S()}U("prev",N)});if(a.generatePagination){D.append("<ul class="+a.paginationClass+"></ul>");P.children().each(function(){b("."+a.paginationClass,D).append('<li><a href="#'+W+'">'+(W+1)+"</a></li>");W++})}else{b("."+a.paginationClass+" li a",D).each(function(){b(this).attr("href","#"+W);W++})}b("."+a.paginationClass+" li:eq("+V+")",D).addClass("current");b("."+a.paginationClass+" li a",D).click(function(){if(a.play){S()}Q=b(this).attr("href").match("[^#/]+$");if(J!=Q){U("pagination",G,Q)}return false});b("a.link",D).click(function(){if(a.play){S()}Q=b(this).attr("href").match("[^#/]+$")-1;if(J!=Q){U("pagination",G,Q)}return false});if(a.play){T=setInterval(function(){U("next",N)},a.play);D.data("interval",T)}})};b.fn.slides.option={preload:false,preloadImage:"/img/loading.gif",container:"slides_container",generateNextPrev:false,next:"next",prev:"prev",pagination:true,generatePagination:true,paginationClass:"pagination",fadeSpeed:350,fadeEasing:"",slideSpeed:350,slideEasing:"",start:1,effect:"slide",crossfade:false,randomize:false,play:0,pause:0,hoverPause:false,autoHeight:false,autoHeightSpeed:350,bigTarget:false,animationStart:function(){},animationComplete:function(){}};b.fn.randomize=function(d){function a(){return(Math.round(Math.random())-0.5)}return(b(this).each(function(){var h=b(this);var j=h.children();var k=j.length;if(k>1){j.hide();var c=[];for(i=0;i<k;i++){c[c.length]=i}c=c.sort(a);b.each(c,function(f,g){var o=j.eq(g);var e=o.clone(true);e.show().appendTo(h);if(d!==undefined){d(o,e)}o.remove()})}}))}})(jQuery);